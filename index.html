<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Welcome</title>
<style>
  body{margin:0;font-family:system-ui;background:#0b1220;color:#fff}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}
  .card{max-width:920px;width:100%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:28px;padding:28px}
  .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
  .h{font-size:44px;line-height:1.05;margin:0 0 10px}
  .sub{opacity:.85;font-size:16px;margin:0 0 18px}
  .box{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10);border-radius:20px;padding:16px}
  .label{opacity:.7;font-size:12px;letter-spacing:.1em;text-transform:uppercase;margin:0 0 8px}
  .big{font-size:22px;margin:0;word-break:break-word}
  .qr{display:flex;align-items:center;justify-content:center;min-height:260px}
  canvas{background:#fff;border-radius:16px;padding:10px}
  .err{color:#ffb4b4}
  @media(max-width:820px){.grid{grid-template-columns:1fr}.h{font-size:36px}}
</style>
</head><body>
<div class="wrap"><div class="card">
  <h1 class="h" id="title">Welcome</h1>
  <p class="sub" id="subtitle">Loading your details…</p>
  <div class="grid">
    <div class="box">
      <p class="label">Wi-Fi Name</p><p class="big" id="ssid">—</p><br/>
      <p class="label">Wi-Fi Password</p><p class="big" id="pass">—</p><br/>
      <p class="label">Apartment</p><p class="big" id="apt">—</p>
    </div>
    <div class="box">
      <p class="label">Scan for info / support</p>
      <div class="qr"><canvas id="qrc"></canvas></div>
      <p class="sub" style="margin:0;opacity:.75" id="qrtext">—</p>
    </div>
  </div>
  <p class="sub" style="margin:18px 0 0;opacity:.65">Need help? Use the QR code or contact your property manager.</p>
</div></div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
const API = "YOUR_WEB_APP_URL";
const t = new URLSearchParams(location.search).get("t");
const el = (id)=>document.getElementById(id);

async function run(){
  if(!t){ el("subtitle").innerHTML = '<span class="err">Missing link token.</span>'; return; }
  const r = await fetch(`${API}?t=${encodeURIComponent(t)}`);
  const d = await r.json();
  if(d.error){ el("subtitle").innerHTML = `<span class="err">${d.error}</span>`; return; }

  const name = d.tenant_name || "Guest";
  el("title").textContent = `Welcome, ${name}`;
  el("subtitle").textContent = `We hope you enjoy your stay.`;
  el("ssid").textContent = d.wifi_name || "—";
  el("pass").textContent = d.wifi_password || "—";
  el("apt").textContent = d.apt_label || "—";

  const qrUrl = d.qr_url || location.origin;
  el("qrtext").textContent = qrUrl;
  QRCode.toCanvas(el("qrc"), qrUrl, { width: 240, margin: 1 });
}
run();
</script>
</body></html>
